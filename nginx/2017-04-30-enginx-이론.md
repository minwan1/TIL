# Daily Coding 2017-04-30일

# NGINX
### 엔진엑스 설치
  * yum install nginx
  *  /etc/nginx/nginx.conf 여기서 기본셋팅 변경할 수 있음

brew 설치도 나쁘지않음.

/usr/local/etc/nginx/nginx.conf 맥위치

## nginx 컴파일 버전
* 안정버전
* 개발버전
* 레거시버전

### nginx 컴파일버전은 의존성주입이 필요하다,
* PCRE
* openssl
* zlib
### nginx는 마스터프로세스와 작업자 프로세스로 실행된다.
ps aux | grep nginx (리눅스에 치면 현재 slave들이 나온다.)

### NGINX 설정
설정파일은 아래의 위치 중의 하나에 있다.
/etc/nginx/conf.d/default.conf
/etc/nginx/sites-available/default
```
root   /usr/share/nginx/html;
  location / {
      index  index.html index.htm index.php;
  }
```
root 위치는 html들이 올라가는 위치를 말하는것같다. 그리고 루트(/)로 들어오게되면 /usr/share/nginx/html폴더에  index  index.html index.htm index.php; 이것들로 실행된다. root는 전역변수같이 사용된다.
```
location ~ \.php$ {
    fastcgi_pass   unix:/var/run/php5-fpm.sock;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
    include        fastcgi_params;
}
```

### Upstream Module
* 한개의 웹서버로 여러대의 was를 돌리는것을 말한다.



## CGI(Common Gateway Interface)란
### CGI
웹서버와 외부 프로그램을 연결해주는 표준화된 프로토콜이다. 웹이 처음 등장했을 때는 HTML과 이미지를 전달해주는 웹서버 밖에 없었다. 하지만 웹에 대한 수요가 증가함에 따라서 정적인 HTML만을 가지고 정보를 제공하는 것에 한계가 생겼고, 이를 극복하기 위해서 등장한 기술이 CGI다. 웹서버로 요청이 들어왔을 때 그것이 웹서버가 처리 할 수 없는 정보일 때 그 정보를 처리 할 수 있는 외부 프로그램을 호출해서 외부 프로그램이 처리한 결과를 웹서버가 받아서 브라우저로 전송하는 것이다. 외부 프로그램은 C, C++, 펄, PHP, Python등 어떤 언어로든 작성될 수 있는데, 이것이 가능한 것은 웹서버와 외부 프로그램 사이에 통용되는 공통의 규칙이 정의되어 있기 때문이다. (위키피디아 참고)
![](https://s3.ap-northeast-2.amazonaws.com/opentutorials-user-file/module/384/1398.gif)
### FastCGI
CGI 는 하나의 요청(Request)에 하나의 프로세스를 생성한다. 이것은 프로세스를 생성하고 삭제하는 과정에서 많은 부하가 발생한다. 당연히 느리다. 이를 개선하기 위해서 등장한 것이 FastCGI이다. FastCGI는 요청이 있을 때마다 프로세스가 만들어지는 것이 아니라 만들어진 프로세스가 계속해서 새로운 요청들을 처리한다. 덕분에 프로세스를 생성하고 제거하는데 들어가는 부하가 줄어든다. (위키피디아 참고)
![](https://s3.ap-northeast-2.amazonaws.com/opentutorials-user-file/module/384/1397.gif)








참고
* [생활 코딩](https://opentutorials.org/module/432/3742)




