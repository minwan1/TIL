# 서브넷 마스크

**서브넷 마스크란 일단 말뜻 그대로 서브, 즉 메인이 아닌 어떤 가공을 통한 네트워크를 만들기 위해서 씌우는 마스크라고 생각하면된다.** 사회에서 소규모 네트워크(회사나 학원 등) 내부에서의 주소를 서브넷 마스크를 이용해 구분을 하는 것이다. IP만으로 네트워크와 호스트번호를 구분할 수 없기때문이다.

좀더 자세히 말하면 서브넷마스크는 서브넷팅을 통해 **IP주소의 어디까지가 네트워크이고 어디까지가 호스트인지 보여주는 역할을 한다.** 실생활에서 예를들면 우편물을 보낸다고하면 한건물 또는 무슨동이 네트워크에 해당하고 그안에 집들은 호스트들이 될것이다. 이것을 구분하게 해주는것이 서브넷 마스크이다. 즉 서브넷마스크를 통해 건물이름과 세부주소를 나누어준다고 생각하면 된다.


**Subnetting/ Subnet Masking**
한개의 IP주소에 서브넷 마스크를 사용하여 네트워크를 나누는 방법을 서브넷팅이라고 한다. 하나의 네트워크 주소를 분할하는것.

**클래스별 기본 서브넷 마스크**

|클래스|기본 서브넷 마스크|
|-|-|
| A 클래스 | 255. 0. 0. 0 |
| B 클래스| 255. 255. 0. 0 |
| C 클래스| 255.255.255. 0 |


## 서브넷 마스크
예를들어 클래스 B주소를 받았습니다. B클래스의 네트워크 범위는 128.0 ~ 191.255 와 같습니다. 그렇다면 여기에서 B클래스에 150.150.0.0에 네트워크를 할당받았다고 해보겠습니다. 그럼 이 네트워크로 연결할 수 있는 호스트수는 65,534(256*256)가 됩니다. 아래그림은 이것을 설명하는것이다.

![](https://i.imgur.com/68O01Cd.png)

* 네트워크 150.150.0.0(호스트 수 - 65,534)
* 브로드캐스트 도메인이 너무 커진다.
* 실제 상황에서는 통신이 불가능하다.

위에서 말한대로 이렇게 되면 65000여개의 호스트를 가지는데 이렇게 큰 네트워크를 구성하게되면 브로드캐스트 범위가 커 아무것도 할 수 없을것이다. 그렇기 때문에 `서브넷마스크` 를 통해 네트워크를 나누어야한다.


서브넷 마스크를 하게 되면 아래의 그림과 같은 구성이 가능하다. 좀 더 브로드캐스트 영역을 세분화할 수 있다.

![](https://i.imgur.com/1otYoVo.png)
* 클래스 B네트워크 150.150.0.0을 서브넷해서 사용한다.
* 서브넷 마스크는 255.255.255.0이다
* 이렇게해서 나뉘어진 서브넷 간의 통신은 라우터를 거쳐야만 가능하다.

원래 B클래스에 디폴트 서브넷 마스크는 255.255.0.0이었던것이 새로운 서브넷 마스크 255.255.255.0으로 바뀐다. 또한 각각의 서브넷간의 통신은 라우터를 통해서만 가능해진다. 


##
모든 IP주소에는 서브넷 마스크가 따라다닌다. 그래야 그 주소가 나우저어진 주소인지를 알 수 있기 때문입니다. 예를들어 C클래스인 210.100.100.1이란 주소가 있다. 그렇다고해서 이주소를 나누지 않는다고 서브넷마스크를 사용하지 않느것은 아닙니다. 기본적으로 C클래스의 기본 서브넷마스크인 255.255.255.0을 사용하여 서브넷팅을 합니다. **그러므로 주어진 네트워크를 하나도 나누지 않고 그대로 다 쓰는 경우는 디폴트 서브넷 마스크를 쓰면된다.**

**서브넷 마스크를 통해 IP주소를 가지고 어디까지가 네트워크 부분이고, 어디까지가 호스트 부분인가를 나타내는 역할을 한다.**

```
1101 0010 . 0110 0100 . 0110 0100 . 0000 0001 = 210.100.100.1 -> IP주소
1111 1111 . 1111 1111 . 1111 1111 . 0000 0000 = 255.255.255.0 -> 서브넷 마스크
AND 연산 결과 : 
1101 0010 . 0110 0100 . 0110 0100 . 0000 0000 = 210.100.100.0 -> 서브넷 네트워크
//네트워크 영역                        //호스트 영역
```
**뒤에 0이 나란히 있는부분이 할당할 수 있는 호스트 영역이고 그앞부분이 네트워크 영역이다.** 

## 네트워크를 통한 서브넷 마스크 구하기 예제
공인 IP주소를 210. 100. 1. 0네트워크를 받았다.이 공인 주소를 이용해서 PC인 네트워크를 최소 4개이상 만든 다음 이들 네트워크를 라우터를 이용해서 서로 통신하게 하려고한다. 이럴 경우 서브넷 마스크를 만들려면 어떻게해야할까 ?


여기에서 서브넷 마스크 변환없이 기본 서브넷으로 사용한다면 IP가용수는 210.100.1.0~210.100.1.255이다. **하지만 IP주소 마지막 끝자리인 0과 1은 각각 네트워크와 브로드캐스트 주소를 나타내기때문에 253개이다.**

여기에서 그럼 간단하게 253개를 먼저 30개씩 할당해보겠다. 그런데 여기에서 30개에 네트워크 주소와 브로드캐스트를 합치면 총 32개의 주소공간이 할당되어야한다. 32개를 이진수로 표현하면 총 5개의 자릿수가 필요하다. 그러면 호스트의 자릿수 5개를 제외하고 서브넷 마스크를 구성하면 다음과 같을것이다.

**210.100.1.ssshhhhh(여기서 s는 서브넷이 되어야하는 부분이고 h는 호스트부분이다.)**

그러면 위에 서브넷을 만들기위한 서브넷 마스크는 255.255.255.1110 0000이다. 그렇다면 이것을 십진수로하면 255.255.255.224가 된다. 따라서 210.100.1.0이란 클래스 C 주소를 받아서 30개의 호스트를 가지는 최소 서브넷 4개이상을 만들려면 서브넷 마스크는 **255.255.255.224**이다.


## 결론
위의 설명을 이해해보면 서브넷 마스크는 커다란 네트워크(호스트 숫자가 많은 네트워크)를 작은 네트워크 여러개로 나누어서 쓰기 위함임을 알 수 있다.

## 참고
시스코 프로그래밍 책
