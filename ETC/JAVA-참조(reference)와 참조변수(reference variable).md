## java 참조와 참조변수란?
java연산자 new참조(reference)는 새로운 인스턴스에 대한 참조를 리턴합니다. e.g)A x = new A();에서 연산자 new가 반환한 참조(reference)는 new A();의 반환값입니다. 참조변수(reference variable)는 x입니다. 클래스의 참조변수(reference variable)에 참조(reference)를 할당할 수 있습니다. 쉽게 말해 자바에서는 참조를 통해서만 객체를 관리할 수 있고, 이 참조는 변수에 저장될 수 있습니다.


* 참조와 참조변수
연산자 new와 생성자를 이용해서 특정 메모리에 인스턴스를 생성했다면 당연히 생성된 인스턴스를 사용할 수 있습니다.
그런데 연산자 new가 인스턴스가 있는 메모리를 생성한 경우, 그 메모리의 주소와 어떻게 연결할 수 있나를 알아야 합니다. C++ 언어에서는 new를 이용해서 메모리를 생성하면 주소 그 자체를 직접 넘겨줍니다. 주소를 저장하기 위한 포인터 변수를 이용해서 주소를 관리하기 때문에 C++에서는 사용자가 주소를 직접 처리합니다. 하지만 자바에서는 메모리 주소를 바로 주지 않는데, 즉 인스턴의 메모리 주소 대신 참조값(해시값)을 할당받게 됩니다.


자바 e.g) 클래스 Sun을 선언합니다.

```java
public class Sun {
    public int distance;
    public int data;
}
```
객체의 참조변수를 선언하는데, 메모리가 생성되기 전이기 때문에 null로 초기화합니다.

```java
Sun s1 = null;
Sun s2 = null;
```
아래와 같이 new로 메모리를 생성합니다.
```java
s1 = new Sun();
s2 = new Sun();
```
메모리가 생성되면 내부 인덱스 테이블(Index Table)에 주소를 맵핑하는 참조이 하나씩 만들어집니다. 이렇게 만들어진 참조이 참조변수 s1과 s2에 할당됩니다.


* 참조은 가상머신(Virtual Machine)에서 자동으로 생성되며, 객체구분을 위한 유일한 Key 값이 됩니다. 실제 s1과 s2에 참조이 들어 있는 지를 확인하기 위해서 s1과 s2를 출력해보면 참조를 확인할 수 있다.


### 참조(해시코드)은 누가 만드나?
new를 이용해서 객체를 생성했을 때 자바 시스템 내부에서 자동으로 참조값을 만들어 줍니다. 참조란 객체의 메모리를 생성했을 때 메모리와 연결된 유일한 숫자값 입니다. 이 숫자값을 참조변수가 받으며, 참조를 갖고 해당 객체를 처리합니다. 참조로 작업하면 내부에서 참조에 연결된 메모리로 작업하는 것과 같은 효과 입니다. 참조값은 4바이트짜리 정수값입니다. 그렇기 때문에 인스턴스 메모리를 할당할 때는 4바이트의 정수값을 객체변수에 할당하게 됩니다.

아래 구문을 참조변수와 연결해서 해석해 보면, 다음과 같은 절차에 의해서 참조값이 인스턴스 s1과 연결된 메모리로 할당됩니다.
```java
s1.distance = 1000
```
s1에는 참조값이 할당되어 있습니다. s1의 참조값과 연결된 주소를 검색하기 위해서 자바 시스템 내부의 인덱스 테이블을 검색합니다. s1의 참조값에 연결된 주소를 인덱스 테이블에서 찾았다면 해당 메모리에 distance의 자리를 찾습니다. s1의 [참조값]-[메모리]-[distance]를 찾았다면 데이터 1000을 할당합니다.


## 참조값 공유
먼저 알아야 할 것은 자바에서 참조값을 만드는 방법은 연산자 new를 이용하는 방법밖에 없다는 것입니다.  참조값을 직접 유저가 만들 수 없고 가상머신만이 참조값을 만들 수 있습니다. 그걸 생성하는 연산자가 new입니다. 그래서 아래와같이 new연사자를 이용해서 참조값을 공유하여 메모리를 공유 효과를 누릴수 있습니다. 실제로는 참조값이 공유되는것입니다. 메모리 주소가 공유되는것은 아닙니다.

```java
Sun sun = new Sun();
sun.value = 2;
Sun sun2 = sun;
System.out.println(sun2.value);//2출력

```




출처: http://dohe2014.tistory.com/entry/참조reference와-참조변수reference-variable [돕자클럽]
