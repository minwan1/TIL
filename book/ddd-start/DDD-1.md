## 도메인


## 요구사항분석

1. 유저는 여러개의 주문을 할 수 있다. 이주문에는 오덜넘버와 총 금액이 들어있다.
2. 배송전에 주문을 취소할 수 있다.
3. 




문제를 해결해야하는 대상 도메인이다. 도메인 모델은 특정 도메인을 개념으로 표현한것이다. 


도메인 계층은 도메인의 핵심 규칙을 구현한다.
출고전에 배송지를 변경할수 있다는 규칙과 주문 취소는 배송전에만 할 수 있다는 구현할 코드가 도메인 계층에 위치하게된다.



```java



public enum OrderState{
    // 주문정보가 변경 가능한지 체크해준다.
    //주문이 가능한지 체크해주는 로직


    PAYMENT_WAITTING{

        public boolean isShppingChangeable(){ // 이때는 가능함
            return true;
        }
    },

    PREPARING{
        public boolean isShipingChangeable(){// 이떄도 가능함
            return true;
        }
    },

    SHIPPED, DELIVERELING, DELIVERY_COMPLETED; // 이떄불가

    public boolean isShippingChangeable(){
        return false;
    }

}
```


* 주문 변경 가능여부를 OrderState -> order로 변경을했는데, 여기에서 중요한점은  배송지 변경 가능여부를 판단하는 기능이 Order에 있든, OrderState에 있든 중요한 점은 주문과 관련된 중요 업무 규칙을 주문 도메인모델인 Order나 OrderState에서하는게 중요하다.




# 도메인 모델 시작
## 도메인
도메인은 특정 분야를 의미한다. 예를들어 온라인 서점을 구현해야한다고 가정해보자. 그럼 개발자 입장에서 온라인 서점은 구현해야 할 소프트웨어의 대상이 된다. 온라인 서점 소프트웨어는 온라인으로 책을 판매하는데 필요한 상품조회, 구매, 결제, 배송 추적등의 기능을 제공해야한다. 이때, 온라인 서점은 소프트웨어로 해결하고하는 문제 영역, 즉 도메인이다.

한도메인은 다시 하시 하위 도메인으로 나뉘어진다. 온라인 서점은 다음과 같이 몇개의 하위 도메인을 가진다.
![](https://i.imgur.com/FVnVSZd.jpg)

* 카탈로그 하위 도메인은 고객에게 구매할 수 있는 상품 목록을 제공한다.
* 주문 하위 도메인은 고객의 주문을 처리한다.
* 혜택 하위 도메인은 쿠폰이나 특별 할인과 같은 서비스를 제공한다
* 배송 하위 도메인은 고객에게 구매한 상품을 전달하는 일련의 과정을 처리한다. 

한하위 도메인은 다른 하위 도메인과 연동하여 완전한 기능을 제공한다. 예를들어 고객이 물건을 구매하면 주문, 결제, 배송, 혜택 하위 도메인의 기능이 엮이게 된다.

특정 도메인을 위한 소프트웨어라고 해서 도메인이 제공해야할 모든 기능을 구현하는것은아니다. 많은 온라인 쇼핑몰이 자체적으로 배송시스템을 구축하기 보다는 외부 배송업체의 시스템을 사용하고, 배송 추적에 필요한 기능만 일부 연동한다.

**도메인마다 고정된 하위 도메인이 존재하는것은 아님**
같은 주문이라도 아래와같은 이유로 도메인이 다르게 구성되어질 수 있음.
* 기업 고객을 대상으로 대형장비를 판다면 카탈로그주고 주문서를 받는정도면된다.
* 일반 고객이라면 카탈로그, 리뷰, 주문, 결제, 회원 기능이 필요


## 도메인 모델


  

# 아키텍처 개요
# 애그리거트
#리포지터리와 모델구현(JPA중심)

#리포지터리의 조회 기능(JPA 중심)
# 응용서비스와 표현 영역
# 도메인 서비스
# 애그리거트 트랜잭션 관리
# 도메인 모델과 BOUNDED CONTEXT
# 이벤트
# CQRS