# NIO 소개
자바 4부터 새로운 입출력이라는 뜻에서 nio 패키지가 추가 되었습니다. 다음은 NIO에서 제공하는 패키지에 대해 간략히 설명하는 표입니다.

|NIO패키지|포함되어 있느 내용|
|-|-|
|java.nio | 다양한 버퍼 클래스 |
|java.nio.channels | 파일 채널, TCP 채널, UDP 채널등의 클래스 |
|java.nio.channels.spi | java.nio.channels 패키지를 위한 서비스 제공자 클래스 |
|java.nio.charset | 문자셋, 인코더, 디코더 API |
|java.nio.charset.spi | java.nio.charset 패키지를 위한 서비스 제공자 클래스 |
|java.nio.file | 파일 및 파일 시스템에 접근하기 위한 클래스 |
|java.nio.file.attribute | 파일 및 파일 시스템의 속성에 접근하기 위한 클래스 |
|java.nio.file.spi | java.nio.file 패키지를 위한 서비스 제공자 클래스 |


## IO와 NIO의 차이점

|구분 | IO | NIO|
|-|-|-|
| 입출력 방식 | 스트림 방식 | 채널 방식 |
| 버퍼 방식 | 넌 버퍼 | 버퍼 |
| 비동기 방식| 지원 안함 | 지원 |
| 블로킹 / 넌블로킹 | 블로킹 방식만 지원 | 블로킹 / 넌블로킹 방식 모두 지원 |


### 스트림 vs 채널
IO는 스트림 기반이다. 스트림은 입력 스트림과 출력 스트림으로 구분되어 있기 때문에 데이터를 읽기 위해서는 입력 스트림으로 생성해야하고, 데이터를 출력하기 위해서는 출력 스트림으로 생성한다. 
`반면 채널은 양방향으로 입력과 출력이 가능하다.` 예를들어 하나의 파일에서 데이터를 읽고 저장하는 작업을 모두 해야한다면 FileChannel 하나만 생성하면 된다.

![io:nio](/assets/io:nio.jpg)

### 넌버퍼 vs 버퍼
IO에서는 출력 스트림이 1바이트를 쓰면 입력 스트림이 1바이트를 읽는 형식으로 되기 때문에 버퍼를 사용해서 복수개바이트를 저장해두고 한번에 읽고 쓰기를 하면 효율적이다. 

일반 IO는 스트림에서 읽은 데이터를 즉시처리한다. 그렇기 때문에 스트림으로부터 입력된 전체 데이터를 별도로 저장하지 않으면, 입력된 데이터의 위치를 이동해가면서 자유롭게 이용할 수 없다.

NIO는 읽은 데이터를 무조건 버퍼에 저장하기 때문에 버퍼 내에서 데이터의 위치를 이동해가면서 필요한 부분만 읽고 쓸 수 있다.

### 블로킹 vs 넌블로킹
블로킹은 입력 스트림의 read() 메소드같이 시스템콜이 일어났을 때 데이터가 입력되기전까지 스레드가 블로킹 되는것을 말한다. IO 스레드가 블로킹되면 다른일을 할 수 없고 블로킹을 빠져 나오기 위해 인터럽트도 할 수 없다.

넌블로킹은 스레드를 인터럽트 함으로써 빠져나올 수 있다는것이다. 그리고 입출력이 일어나고 시스템콜이 발생하더라도 블로킹되지않는것을 말한다. NIO에 너블로킹의 핵심 객체는 멀티 플렉서 인셀렉터이다. 셀렉터는 복수개의 채널중에서 준비완료된 채널을 선택하는 방법을 제공해준다.

## 파일과 디렉토리




