JSP는 서블릿으로 컴파일 된다. Tomcat과 같은 WAS는 쓰레드와 Servlet 클래스를 미리 객체로 생성해 둔다. 그리고 생성된 서블릿 객체는 계속 해서 재사용됩니다. 즉, test.jsp 에 대한 요청이 동시에 여러개가 들어오면 Tomcat은 이미 생성해둔 쓰레드들에게 Servlet 객체를 할당하고 수행하게 합니다. 하지만 각 쓰레드에 할당하는 test.jsp의 서블릿 객체는 모두 동일한 것입니다. 실제로는 모두 한개의 서블릿 객체에 있는 service()메소드를 호출해서 작업을 수행하게 됩니다.

** 여러 쓰레드가 동시에 한개의 서블릿 객체를 호출한다는 얘기입니다. **

이렇게 여러개의 쓰레드가 동시에 한 객체를 건드려서 작업할 때, 그 객체에에 클래스 변수가 있으면 그 변수에 읽기/쓰기 작업을 할 때는 철저하게 동시작업에 대한 관리(synchronize)가 필요합니다.


제일 좋은 것은 클래스 변수를 사용하지 말고, 모든 변수는 메소드단위에서 생성/소멸 시켜버리는것입니다. JSP의 경우에는 <% .. %>에서만 변수를 생성하고 <%! %>에서는 변수를 생성하면 안된다는 거죠.(상수는 상관없습니다)



좋은 내용 http://jojoldu.tistory.com/118
